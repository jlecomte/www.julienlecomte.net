var query;var start;var timer;var WSTIMEOUT=10;var COUNT=10;var currentWidth=0;setInterval(function(){var orient;if(window.innerWidth!==currentWidth){currentWidth=window.innerWidth;orient=currentWidth===320?'profile':'landscape';document.body.setAttribute('orient',orient);setTimeout(scrollTo,100,0,1);}},300);function wsSuccess(json){var i,el,results,result,list,item,more;if(timer){clearTimeout(timer);timer=null;}results=json.ResultSet.Result;list=$('bd').getElementsByTagName('UL')[0];if(!list){$('bd').innerHTML='';list=document.createElement('UL');$('bd').appendChild(list);}else{list.removeChild(list.lastChild);}for(i=0;i<results.length;i++){result=results[i];item=document.createElement('LI');item.innerHTML='<a href="'+result.Url+'" target="_blank">'+'<h3>'+result.Title+'</h3>'+'<p>'+result.Summary+'</p>'+'</a>';list.appendChild(item);}item=document.createElement('LI');item.className='last-child';item.innerHTML='<a href="#" id="getmore">Get '+COUNT+' More Results...</a>';list.appendChild(item);more=item.firstChild;more.onclick=function(evt){stopEvent(evt);this.parentNode.innerHTML='<p class="loading">Loading...</p>';search(start,COUNT);};start+=COUNT;}function search(start,count){var url,script;if(timer){return;}url='http://search.yahooapis.com/WebSearchService/V1/webSearch'+'?appid=YahooDemo'+'&output=json'+'&callback=wsSuccess'+'&query='+escape(query)+'&start='+start+'&results='+count;script=document.createElement('SCRIPT');script.id='wsScript';script.src=url;document.getElementsByTagName('head')[0].appendChild(script);if(start===1){$('bd').innerHTML='<p class="loading">Loading...</p>';}timer=setTimeout(function(){timer=null;$('bd').innerHTML='<p class="error">An error occurred. Please try again later.</p>';},WSTIMEOUT*1000);}function submitForm(){query=$('queryField').value.trim();if(query===''){return;}$('bd').innerHTML='<p class="loading">Loading...</p>';start=1;search(start,COUNT);}$('searchForm').onsubmit=function(evt){stopEvent(evt);submitForm();};$('submitBtn').onclick=function(evt){stopEvent(evt);submitForm();};function $(id){return document.getElementById(id);}function stopEvent(evt){evt.preventDefault();evt.stopPropagation();}String.prototype.trim=function(){var whitespacePattern=new RegExp('^\\s*(\\S*(\\s+\\S+)*)\\s*$');return whitespacePattern.exec(this)[1];};