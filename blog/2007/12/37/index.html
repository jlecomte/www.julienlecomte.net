<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Adding Back Button and Bookmarking Support to Your DHTML Slide Show | Julien Lecomte&#039;s Blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.julienlecomte.net/blog/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://www.julienlecomte.net/blog/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="Julien Lecomte&#039;s Blog &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Julien Lecomte&#039;s Blog &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Julien Lecomte&#039;s Blog &raquo; Adding Back Button and Bookmarking Support to Your DHTML Slide Show Comments Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.julienlecomte.net\/blog\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='colorbox-theme1-css'  href='../../../wp-content/plugins/jquery-lightbox-for-native-galleries/colorbox/theme1/colorbox.css' type='text/css' media='screen' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='../../../wp-content/themes/twentytwelve/style.css' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://www.julienlecomte.net/blog/wp-content/themes/twentytwelve/css/ie.css' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min.js'></script>
<script type='text/javascript' src='../../../wp-content/plugins/jquery-lightbox-for-native-galleries/colorbox/jquery.colorbox-min.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Introducing CrossFrame, a Safe Communication Mechanism Across Documents and Across Domains' href='../../../index.html?p=31' />
<link rel='next' title='The Problem With innerHTML' href='../../../index.html?p=38' />
<meta name="generator" content="WordPress 4.3" />
<link rel='canonical' href='../../../index.html?p=37' />
<link rel='shortlink' href='../../../index.html?p=37' />
	<link href="../../../wp-content/plugins/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../../../wp-content/plugins/google-code-prettify/prettify.js"></script>
	<!-- jQuery Lightbox For Native Galleries v3.2.2 | http://www.viper007bond.com/wordpress-plugins/jquery-lightbox-for-native-galleries/ -->
<script type="text/javascript">
// <![CDATA[
	jQuery(document).ready(function($){
		$(".gallery").each(function(index, obj){
			var galleryid = Math.floor(Math.random()*10000);
			$(obj).find("a").colorbox({rel:galleryid, maxWidth:"95%", maxHeight:"95%"});
		});
		$("a.lightbox").colorbox({maxWidth:"95%", maxHeight:"95%"});
	});
// ]]>
</script>
</head>

<body class="single single-post postid-37 single-format-standard full-width custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="../../../../index.html" title="Julien Lecomte&#039;s Blog" rel="home">Julien Lecomte&#039;s Blog</a></h1>
			<h2 class="site-description">Woodworking, Amateur Astronomy, Web Development and Operating System Programming.</h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menu</button>
			<a class="assistive-text" href="../../../index.html?p=37#content" title="Skip to content">Skip to content</a>
			<div class="nav-menu"><ul><li ><a href="../../../../index.html">Home</a></li><li class="page_item page-item-36"><a href="../../../about-the-author/index.html">About The Author</a></li></ul></div>
		</nav><!-- #site-navigation -->

			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-37" class="post-37 post type-post status-publish format-standard hentry category-web-development">
				<header class="entry-header">
			
						<h1 class="entry-title">Adding Back Button and Bookmarking Support to Your DHTML Slide Show</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><a href="http://developer.yahoo.com/yui/" target="_blank">YUI</a> 2.4.0, which was <a href="http://yuiblog.com/blog/2007/12/04/yuii-240/" target="_blank">just released</a> today, comes with a minor update to its history library. To celebrate this new release, I thought I would write a short article demonstrating how to use the YUI Browser History Manager to add back button and bookmarking support to a DHTML slide show.</p>
<p>Let&#8217;s start with a <a href="../../../../blogfiles/slide-show-bhm/index.html" target="_blank">slightly modified version</a> of Christian Heilmann&#8217;s <a href="http://icant.co.uk/articles/maintainablejavascriptslideshow/" target="_blank">maintainable, unobstrusive DHTML slide show</a>. First, import the YUI Browser History Manager code and its dependencies:</p>
<pre class="prettyprint">
&#60;script type="text/javascript" src="http://yui.yahooapis.com/2.4.0/build/yahoo-dom-event/yahoo-dom-event.js"&#62;&#60;/script&#62;
&#60;script type="text/javascript" src="http://yui.yahooapis.com/2.4.0/build/history/history-min.js"&#62;&#60;/script&#62;
</pre>
<p>Then, add the necessary static markup to the page:</p>
<pre class="prettyprint">
&#60;iframe id="yui-history-iframe" src="img/aston-martin.jpg"&#62;&#60;/iframe&#62;
&#60;input id="yui-history-field" type="hidden"&#62;
</pre>
<p>Note that the asset loaded in the IFrame does not have to be an HTML document (here, we load the first visible image in the slide show) This trick is useful to avoid an additional server round-trip, which would degrade the performance of your site.</p>
<p>Don&#8217;t forget to hide the IFrame by adding the following style declaration:</p>
<pre class="prettyprint">
#yui-history-iframe {
  position:absolute;
  top:0; left:0;
  width:1px; height:1px;
  visibility:hidden;
}
</pre>
<p>Our application is composed of only one module, the slide show, which we will refer to using the identifier &#8220;slideshow&#8221;. The state of the &#8220;slideshow&#8221; module will encode the 0-based index of the currently visible slide. The next step is to figure out the initial state of our slide show module:</p>
<pre class="prettyprint">
initialState = YAHOO.util.History.getBookmarkedState("slideshow") || "0";
</pre>
<p>The &#8220;slideshow&#8221; module can now be registered with the Browser History Manager, passing in the <code>onStateChange</code> callback, which will be executed when the state of the &#8220;slideshow&#8221; module changes:</p>
<pre class="prettyprint">
YAHOO.util.History.register("slideshow", initialState, function (state) {
    showSlide(parseInt(state));
});
</pre>
<p>The initialization routine (<code>initSlideShow</code>) needs to be slightly modified to add a history entry instead of just showing the next slide when the user hits the &#8220;previous&#8221; or &#8220;next&#8221; links:</p>
<pre class="prettyprint">
function initSlideShow () {
    currentSlideIndex = parseInt(YAHOO.util.History.getCurrentState("slideshow"));
    slides = YAHOO.util.Dom.get("slides").getElementsByTagName("li");
    YAHOO.util.Dom.addClass(slides[currentSlideIndex], "current");
    YAHOO.util.Event.addListener(["prev", "next"], "click", function (evt) {
        YAHOO.util.Event.stopEvent(evt);
        var newSlideIndex = this.id === "next" ?
            currentSlideIndex + 1 :
            currentSlideIndex - 1;
        if (newSlideIndex >= slides.length) {
            newSlideIndex = 0;
        } else if (newSlideIndex < 0) {
            newSlideIndex = slides.length - 1;
        }
        YAHOO.util.History.navigate("slideshow", newSlideIndex.toString());
    });
}
</pre>
<p>Call <code>initSlideShow</code> when the Browser History Manager is ready:</p>
<pre class="prettyprint">
YAHOO.util.History.onReady(function () {
    initSlideShow();
});
</pre>
<p>Finally, initialize the Browser History Manager:</p>
<pre class="prettyprint">
YAHOO.util.History.initialize("yui-history-field", "yui-history-iframe");
</pre>
<p>The final version is available <a href="../../../../blogfiles/slide-show-bhm/index-bhm.html" target="_blank">here</a>. Cheers!</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="../../../category/web-development/index.html" rel="category tag">Web Development</a> on <a href="../../../2007/12/37/index.html" title="10:53 am" rel="bookmark"><time class="entry-date" datetime="2007-12-05T10:53:53+00:00">December 5, 2007</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="../../../author/admin/index.html" title="View all posts by Julien Lecomte" rel="author">Julien Lecomte</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

				<nav class="nav-single">
					<h3 class="assistive-text">Post navigation</h3>
					<span class="nav-previous"><a href="../../../2007/11/31/index.html" rel="prev"><span class="meta-nav">&larr;</span> Introducing CrossFrame, a Safe Communication Mechanism Across Documents and Across Domains</a></span>
					<span class="nav-next"><a href="../../../2007/12/38/index.html" rel="next">The Problem With innerHTML <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single -->

				
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			6 thoughts on &ldquo;<span>Adding Back Button and Bookmarking Support to Your DHTML Slide Show</span>&rdquo;		</h2>

		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-758">
		<article id="comment-758" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/aad77b1550952f7e6acc9265d9c707e0?s=44&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/aad77b1550952f7e6acc9265d9c707e0?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn">mrrau</b> </cite><a href="comment-page-1/index.html#comment-758"><time datetime="2007-12-05T13:46:37+00:00">December 5, 2007 at 1:46 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>but&#8230; it doesn&#8217;t work in Opera 9.23</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-759">
		<article id="comment-759" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=44&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='../../../../index.html' rel='external nofollow' class='url'>Julien Lecomte</a></b> <span>Post author</span></cite><a href="comment-page-1/index.html#comment-759"><time datetime="2007-12-05T14:59:01+00:00">December 5, 2007 at 2:59 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>@mrrau</p>
<p>Yes, this is a known limitation of the YUI Browser History Manager (it is listed <a href="http://developer.yahoo.com/yui/history/#limitations" target="_blank" rel="nofollow">here</a>) The same limitation is shared by all the history frameworks out there. Opera knows about the problem, but has not given any estimate as to when this bug will be fixed.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-760">
		<article id="comment-760" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=44&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='../../../../index.html' rel='external nofollow' class='url'>Julien Lecomte</a></b> <span>Post author</span></cite><a href="comment-page-1/index.html#comment-760"><time datetime="2007-12-05T15:00:47+00:00">December 5, 2007 at 3:00 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>@mrrau</p>
<p>Also note that even though the YUI Browser History Manager does not support Opera, Opera users can fully enjoy the slide show. The only thing they will miss is the back button and bookmarking functionality. To that regard, the YUI Browser History Manager allows for graceful degradation.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-769">
		<article id="comment-769" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/00809b14f856d33156329188a5b6ecdc?s=44&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/00809b14f856d33156329188a5b6ecdc?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://www.robertnyman.com' rel='external nofollow' class='url'>Robert Nyman</a></b> </cite><a href="comment-page-1/index.html#comment-769"><time datetime="2007-12-06T01:55:46+00:00">December 6, 2007 at 1:55 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Thanks for sharing. However, I wouldn&#8217;t recommend adding an <code>iframe</code> to the markup of any page, since it will be invalid HTML/XHTML (with a strict doctype, that is, which is what everyone should use).</p>
<p>I&#8217;d rather like the <code>iframe</code> to be added dynamically through the script/framework to cater to these things; just as I did it with <a href="http://www.robertnyman.com/ask" rel="nofollow">ASK</a> (feel completely free to remove this link; i just wanted something to exemplify what I&#8217;m talking about).</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-772">
		<article id="comment-772" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=44&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/8233cc93c34d23ce58c0096fb07375c0?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='../../../../index.html' rel='external nofollow' class='url'>Julien Lecomte</a></b> <span>Post author</span></cite><a href="comment-page-1/index.html#comment-772"><time datetime="2007-12-06T09:52:25+00:00">December 6, 2007 at 9:52 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>@Robert</p>
<p>The YUI Browser History Manager used to create the markup dynamically in previous versions. However, doing so is the source of a major bug where Internet Explorer &#8220;forgets&#8221; some of its history when leaving the page and then coming back.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-799">
		<article id="comment-799" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/00809b14f856d33156329188a5b6ecdc?s=44&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/00809b14f856d33156329188a5b6ecdc?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://www.robertnyman.com' rel='external nofollow' class='url'>Robert Nyman</a></b> </cite><a href="comment-page-1/index.html#comment-799"><time datetime="2007-12-10T09:50:18+00:00">December 10, 2007 at 9:50 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Julien,</p>
<p>Hmm, yes. It&#8217;s a tricky thing to get it working while being valid.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
		</ol><!-- .commentlist -->

		
				<p class="nocomments">Comments are closed.</p>
		
	
	
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


		<script type="text/javascript">
		window.onload = function(){prettyPrint();};
	</script>
	</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
						<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type="text/javascript">
// <![CDATA[
// ]]>
</script>
<script type='text/javascript' src='../../../wp-content/themes/twentytwelve/js/navigation.js'></script>
</body>
</html>
